%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Optionen zum Layout des Buchs                                     %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[
a4paper,							% alle weiteren Papierformat einstellbar
%landscape,						% Querformat
11pt,								  % Schriftgröße (12pt, 11pt (Standard))
%BCOR1cm,							% Bindekorrektur, bspw. 1 cm
%DIVcalc,							% führt die Satzspiegelberechnung neu aus
%											  s. scrguide 2.4
%oneside,							% einseitiges Layout
%twocolumn,						% zweispaltiger Satz
%openany,							% Kapitel können auch auf linken Seiten beginnen
%halfparskip*,				% Absatzformatierung s. scrguide 3.1
%headsepline,					% Trennline zum Seitenkopf	
%footsepline,					% Trennline zum Seitenfuß
%notitlepage,					% in-page-Titel, keine eigene Titelseite
bibliography=totoc,
chapterprefix,				% vor Kapitelüberschrift wird "Kapitel Nummer" gesetzt
appendixprefix,				% Anhang wird "Anhang" vor die Überschrift gesetzt 
%normalheadings,			% Überschriften etwas kleiner (smallheadings)
%leqno,								% Nummerierung von Gleichungen links
fleqn,								% Ausgabe von Gleichungen linksbündig
%draft								  % überlangen Zeilen in Ausgabe gekennzeichnet
]
{scrbook}

%\pagestyle{empty}		% keine Kopf und Fußzeile (k. Seitenzahl)
%\pagestyle{headings}	% lebender Kolumnentitel  

\usepackage[titletoc,title]{appendix}

%% Deutsche Anpassungen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}
\usepackage{lmodern}

%\PrerenderUnicode{ü}
%\PrerenderUnicode{Ü}
%\PrerenderUnicode{ä}
%\PrerenderUnicode{Ä}
%\PrerenderUnicode{ö}
%\PrerenderUnicode{Ö}
%\PrerenderUnicode{ß}

%% Falls die automatische Worttrennung in Wörtern mit Umlauten
%% nicht funktionieren sollte oder der Text pixelig aussieht:
%% ==> Installieren Sie die cm-super Fonts (z.B. mit dem mikTeX Package Manager).
%% Eine nicht ganz vollwertige Alternative ist die Verwendung dieses Pakets:
%\usepackage{ae, aeguill}

%% Stichwortverzeichnis %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{makeidx}

%% Packages für Grafiken & Abbildungen %%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption} %%Moderne Alternative zu subfig

%% Beachten Sie:
%% Die Einbindung einer Grafik erfolgt mit \includegraphics{Dateiname}
%% bzw. über den Dialog im Einfügen-Menü.
%% 
%% Im Modus "LaTeX => PDF" können Sie u.a. folgende Grafikformate verwenden:
%%   .jpg  .png  .pdf  .mps
%% 
%% In den Modi "LaTeX => DVI", "LaTeX => PS" und "LaTeX => PS => PDF"
%% können Sie u.a. folgende Grafikformate verwenden:
%%   .eps  .ps  .bmp  .pict  .pntg


%% Mathe %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsmath}
\usepackage{amsfonts}

%% Todo %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{todonotes}

%% Farbanpassungen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{xcolor}
\definecolor{unigruen}{rgb}{0,0.5961,0.6314}
\definecolor{unirot}{rgb}{0.373,0.0941,0.1176}

%% Seitenränder %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[left=40mm, right=30mm, bottom=30mm]{geometry}

%% Kopf- und Fußzeilen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{scrpage2}
\clearscrheadfoot %% löscht standard einstellungen
\ohead{\pagemark} %kopf rechts Seitennummer
%%\ihead{\thechapter\ \thesection\ \sectionmark} %Kopf links
\ihead{\leftmark}
\automark{section} 
\setheadsepline{0.2pt} %% horizontale linie im Kopf
\setfootsepline{0.2pt} %% horizontale linie im Fuß

%% Extended UTF-8 support  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{ucs}

%% Tabellen  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{booktabs}
%\usepackage{tabularx}

%% Protokolle etc. als Bitfeld  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% http://texdoc.net/texmf-dist/doc/latex/bytefield/bytefield.pdf
\usepackage{bytefield}


\newcommand{\colorbitbox}[3]{%
\rlap{\bitbox{#2}{\color{#1}\rule{\width}{\height}}}%
\bitbox{#2}{#3}}

\definecolor{lightcyan}{rgb}{0.84,1,1}
\definecolor{lightgreen}{rgb}{0.64,1,0.71}
\definecolor{lightred}{rgb}{1,0.7,0.71}

%% Bibliographiestil %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ftp://ftp.tex.ac.uk/tex-archive/macros/latex/contrib/natbib/natbib.pdf
\usepackage{natbib}

%% Lorem Ipsum %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% http://ctan.org/pkg/lipsum
\usepackage{lipsum}

%% Absatz-Einstellungen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{parskip}

%% Code-Listings %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[final]{listings}

%% Hyperlinks %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% http://www.tug.org/applications/hyperref/ftp/doc/manual.pdf
\usepackage[backref,bookmarks=true,pdfpagelabels,plainpages=false]{hyperref}

\hypersetup{colorlinks=true}

%% Glossaries  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% http://ctan.org/pkg/glossaries

%\usepackage[nonumberlist,acronym,toc,section]{glossaries}
\usepackage[acronym]{glossaries}

%% Stichwortverzeichnis anfordern %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeindex

%% Glossar anfordern %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeglossaries

% Glossar einbinden
\input{./glossary/glossar.tex}

%% PDF-spezifische Einstellungen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\hypersetup{
						pdfpagemode=UseOutlines
						}

\makeatletter
\AtBeginDocument{
	\let\oldand\and\def\and{and }
	\hypersetup{
							pdftitle = {\@title},
							pdfauthor = {\@author},
							pdfsubject = {\@subject},
							pdfkeywords = {BHT, ARM, Cortex-M0, Kalman-Filter, MARG, IMU, Sensor Fusion, Signal Processing}
						}
	\let\and\oldand
}
\makeatother

%% Dokumenten-Titel und verwandtes %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subject{Fortgeschrittene ARM-Microcontroller-Programmierung}
\title{Orientierungserkennung durch MARG-Sensorfusion mittels eines Kalman-Filters auf dem Freescale Kinetis KL25Z}
\author{Markus Mayer
				\and
				Julian Dombrow}
\publishers{Beuth-Hochschule für Technik, Berlin}
\date{\today}

\definecolor{mygray}{rgb}{0.5,0.5,0.5}

% Code-Stile
\lstdefinestyle{lolbash}{
    language={bash}, 
		basicstyle=\ttfamily\tiny,
		frame=single,
    moredelim=**[is][\slshape]{`}{`},
    moredelim=**[is][\color{orange}]{°}{°}
}

\lstdefinestyle{lolc}{
    language={C}, 
		basicstyle=\ttfamily\tiny,
		frame=single,
    moredelim=**[is][\slshape]{`}{`},
    moredelim=**[is][\color{orange}]{°}{°},
		showstringspaces=false,
		keywordstyle=\bfseries\color{green!40!black},
		commentstyle=\itshape\color{purple!40!black},
		identifierstyle=\color{black},
		stringstyle=\color{blue},
		escapeinside={\%*}{*)},
		breakatwhitespace=true,
		breaklines=true,
		morekeywords={uint8_t, uint16_t, uint_fast8_t, uint_least8_t, uint_fast16_t, uint_least8_t,
									mma8451q_confreg_t, mma8451q_acc_t,
									mpu6050_confreg_t},
		numbers=left,
		numbersep=5pt,
		numberstyle=\tiny\color{mygray}
}

\lstdefinestyle{lolcsharp}{
    language={Java}, 
		basicstyle=\ttfamily\tiny,
		frame=single,
		keywordstyle=\bfseries\color{green!40!black},
		commentstyle=\itshape\color{purple!40!black},
		identifierstyle=\color{black},
		stringstyle=\color{blue},
		morekeywords={readonly, const, event},
		breakatwhitespace=true,
		breaklines=true,
		numbers=left,
		numbersep=5pt,
		numberstyle=\tiny\color{mygray},
		escapeinside={\%*}{*)}
}

\lstdefinestyle{lolmatlab}{
    language={Matlab}, 
		basicstyle=\ttfamily\tiny,
		frame=single,
		keywordstyle=\bfseries\color{green!40!black},
		commentstyle=\itshape\color{purple!40!black},
		identifierstyle=\color{black},
		stringstyle=\color{blue},
		morekeywords={readonly, const, event},
		breakatwhitespace=true,
		breaklines=true,
		numbers=left,
		numbersep=5pt,
		numberstyle=\tiny\color{mygray},
		escapeinside={\%*}{*)}
}

\begin{document}

\input{./content/beuth.tex}
\input{./content/titel.tex}
\input{./content/directories.tex}

%% Der Text %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\frontmatter					% Vorspann (z.B. römische Seitenzahlen)
\input{./content/einleitung.tex}

\mainmatter						% Hauptteil
\input{./content/entwicklungsumgebung.tex}
\input{./content/sensoren.tex}
\input{./content/sonstigercode.tex}
\input{./content/algorithmus.tex}

\appendix							% Beginn des Anhangs

\begin{appendices}
\input{./content/anhang_opensda.tex}
\input{./content/anhang_listings.tex}
\end{appendices}

\backmatter					% Nachspann 
\input{./content/backmatter.tex}

\end{document}